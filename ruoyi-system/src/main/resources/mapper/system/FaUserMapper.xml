<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.FaUserMapper">

  <resultMap id="BaseResultMap" type="com.ruoyi.system.domain.FaUser">
    <id column="id" property="id" />
    <result column="avatar" property="avatar" />
    <result column="nickname" property="nickname" />
    <result column="platform" property="platform" />
    <result column="type" property="type" />
    <result column="open_id" property="openId" />
    <result column="union_id" property="unionId" />
    <result column="all_fas_muin" property="allFasMuin" />
    <result column="sys_user_id" property="sysUserId" />
    <result column="create_by" property="createBy" />
    <result column="create_time" property="createTime" />
    <result column="update_by" property="updateBy" />
    <result column="update_time" property="updateTime" />
  </resultMap>

  <sql id="Base_Column_List">
    id, avatar, nickname, platform, type, open_id, union_id, all_fas_muin, sys_user_id, create_by, create_time, update_by, update_time
  </sql>

  <select id="selectFaUserById" resultMap="BaseResultMap" parameterType="java.lang.Long">
    SELECT
    <include refid="Base_Column_List" />
    FROM fa_user
    WHERE id = #{id}
  </select>

  <select id="selectFaUserList" resultMap="BaseResultMap" parameterType="com.ruoyi.system.domain.FaUser">
    SELECT
    <include refid="Base_Column_List" />
    FROM fa_user
    <where>
      <if test="avatar != null and avatar != ''">AND avatar LIKE CONCAT('%', #{avatar}, '%')</if>
      <if test="nickname != null and nickname != ''">AND nickname LIKE CONCAT('%', #{nickname}, '%')</if>
      <if test="platform != null and platform != ''">AND platform = #{platform}</if>
      <if test="type != null and type != ''">AND type = #{type}</if>
      <if test="openId != null and openId != ''">AND open_id = #{openId}</if>
      <if test="unionId != null and unionId != ''">AND union_id = #{unionId}</if>
      <if test="allFasMuin != null and allFasMuin != ''">AND all_fas_muin = #{allFasMuin}</if>
      <if test="sysUserId != null">AND sys_user_id = #{sysUserId}</if>
      <if test="params.beginTime != null and params.beginTime != ''"><!-- 开始时间检索 -->
        AND date_format(create_time,'%y%m%d') &gt;= date_format(#{params.beginTime},'%y%m%d')
      </if>
      <if test="params.endTime != null and params.endTime != ''"><!-- 结束时间检索 -->
        AND date_format(create_time,'%y%m%d') &lt;= date_format(#{params.endTime},'%y%m%d')
      </if>
    </where>
    ORDER BY create_time DESC
  </select>

  <insert id="insertFaUser" parameterType="com.ruoyi.system.domain.FaUser" useGeneratedKeys="true" keyProperty="id">
    INSERT INTO fa_user
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="avatar != null">avatar,</if>
      <if test="nickname != null">nickname,</if>
      <if test="platform != null">platform,</if>
      <if test="type != null">type,</if>
      <if test="openId != null">open_id,</if>
      <if test="unionId != null">union_id,</if>
      <if test="allFasMuin != null">all_fas_muin,</if>
      <if test="sysUserId != null">sys_user_id,</if>
      <if test="createBy != null">create_by,</if>
      create_time,
      <if test="updateBy != null">update_by,</if>
      update_time
    </trim>
    <trim prefix="VALUES (" suffix=")" suffixOverrides=",">
      <if test="avatar != null">#{avatar},</if>
      <if test="nickname != null">#{nickname},</if>
      <if test="platform != null">#{platform},</if>
      <if test="type != null">#{type},</if>
      <if test="openId != null">#{openId},</if>
      <if test="unionId != null">#{unionId},</if>
      <if test="allFasMuin != null">#{allFasMuin},</if>
      <if test="sysUserId != null">#{sysUserId},</if>
      <if test="createBy != null">#{createBy},</if>
      NOW(),
      <if test="updateBy != null">#{updateBy},</if>
      NOW()
    </trim>
  </insert>

  <update id="updateFaUser" parameterType="com.ruoyi.system.domain.FaUser">
    UPDATE fa_user
    <set>
      <if test="avatar != null">avatar = #{avatar},</if>
      <if test="nickname != null">nickname = #{nickname},</if>
      <if test="platform != null">platform = #{platform},</if>
      <if test="type != null">type = #{type},</if>
      <if test="openId != null">open_id = #{openId},</if>
      <if test="unionId != null">union_id = #{unionId},</if>
      <if test="allFasMuin != null">all_fas_muin = #{allFasMuin},</if>
      <if test="sysUserId != null">sys_user_id = #{sysUserId},</if>
      <if test="updateBy != null">update_by = #{updateBy},</if>
      update_time = NOW()
    </set>
    WHERE id = #{id}
  </update>

  <delete id="deleteFaUserById" parameterType="java.lang.Long">
    DELETE FROM fa_user WHERE id = #{id}
  </delete>

  <delete id="deleteFaUserByIds" parameterType="java.lang.String">
    DELETE FROM fa_user WHERE id IN
    <foreach item="id" collection="array" open="(" separator="," close=")">
      #{id}
    </foreach>
  </delete>

  <select id="selectFaUserByOpenId" resultMap="BaseResultMap" parameterType="java.lang.String">
    SELECT
    <include refid="Base_Column_List" />
    FROM fa_user
    WHERE open_id = #{openId}
  </select>

  <select id="selectFaUserByUnionId" resultMap="BaseResultMap" parameterType="java.lang.String">
    SELECT
    <include refid="Base_Column_List" />
    FROM fa_user
    WHERE union_id = #{unionId}
  </select>

  <select id="selectFaUserByAllFasMuin" resultMap="BaseResultMap" parameterType="java.lang.String">
    SELECT
    <include refid="Base_Column_List" />
    FROM fa_user
    WHERE all_fas_muin = #{allFasMuin}
  </select>

</mapper>