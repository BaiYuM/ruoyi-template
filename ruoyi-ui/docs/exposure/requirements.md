# 自动/曝光模块 需求文档

## 1. 概述
- 模块名称：曝光功能（自动曝光 / 定向曝光 / 链接曝光 / 搜索账号曝光）
- 所属项目：ruoyi-ui（前端）
- 目的：提供自动化的曝光/投放配置入口，支持创建、编辑、批量导入目标、AI 辅助生成评论/关键词、查看曝光统计和调整自动曝光运行参数。

## 2. 目标
- 提供一致的 UI 与交互，复用项目组件（MyTable、el-card、el-drawer 等）。
- 支持新增/编辑曝光配置、批量导入目标账号（CSV/Excel）、AI 助手辅助生成评论/关键词、查看曝光统计、调整自动曝光参数。

## 3. 范围
- 前端页面与组件实现（交互、表单、校验、文件上送）。
- 提供前端 API stub（`src/api/exposure.js`），后端需实现对应接口以完成持久化和 Excel 解析。

## 4. 用户角色
- 系统管理员 / 运营人员：创建和管理曝光配置，查看统计，调整全局曝光参数。

## 5. 用户故事
1. 作为运营人员，我可以查看曝光配置列表并按平台/配置类型筛选。
2. 我可以创建新的自动曝光配置，填写配置名称、平台账号、配置类型、搜索关键词、评论内容、次数限制及启用开关。
3. 我可以使用 AI 助手帮写或润色评论/关键词。
4. 我可以批量导入目标账号（CSV 前端解析或 Excel 上传后端解析）。
5. 我可以查看“曝光统计”弹窗中的趋势图和指标（占位，后续接入后端/图表库）。
6. 我可以打开“自动曝光设置”对话框设置曝光间隔范围并保存。

## 6. 功能需求（详细）
- 列表视图
  - 展示列：配置名称、平台账号、平台、上次停止原因、配置类型、搜索关键词、评论匹配关键词、状态、操作
  - 支持分页、编辑操作、mock 数据支持离线体验
- 搜索 / 筛选
  - 平台账号下拉选择、配置类型下拉选择、关键字模糊搜索
- 新增/编辑抽屉（右侧）
  - 字段：配置名称（必填，<=50 字）、平台账号（必填）、配置类型（评论/私信）、搜索关键词、评论内容（多行，支持多行数据）、每日限制（数字）、启动时间（time picker）、排序方式、跳过重复、启用开关
  - AI 帮写：弹出 AI 助手对话（可输入需求并返回文本用于回填）
  - 导入：支持 CSV 客户端解析并填充目标账号；Excel (.xls/.xlsx) 采用 multipart/form-data 上传至后端解析接口
- 曝光统计
  - 弹窗占位，预留图表/表格区域，后续接 ECharts 或后端统计数据
- 自动曝光设置
  - 弹窗允许设置最小/最大曝光间隔（秒），支持提交并保存（前端 emit，后端保存为可选）

## 7. 非功能需求
- 可访问性：表单控件应有 label 与 placeholder。
- 响应式：抽屉与弹窗在小屏时不应出现内容溢出，数值输入有固定宽度并在窄屏换行。
- 安全性：文件上传需后端鉴权；前端限制上传类型/大小（建议限制 5MB）。
- 国际化：界面文案使用项目现有 i18n 方案（如存在）。

## 8. 验收标准
- 页面能打开并展示 mock 列表数据。
- 新增/编辑抽屉表单校验工作正常，提交后列表更新（mock）。
- AI 助手能返回文本并回填到表单。
- CSV 导入能解析并填充目标账号（若上传 Excel，则前端上传成功并展示后端解析结果）。
- 曝光统计与自动曝光设置弹窗能正常打开、提交/关闭且在 UI 不溢出。

## 9. 依赖与限制
- 依赖 Element Plus、项目现有组件（MyTable、PageHeader）。
- Excel 客户端解析需引入 `xlsx`（可选）；当前建议后端解析以避免额外依赖。

## 10. 风险
- AI 文本生成需审查，避免违规或广告敏感用语。
- Excel 文件上传解析需注意 CSV/Excel 格式差异与编码问题。

---
文档生成时间：自动化生成
